#!/usr/bin/env bash
set -euo pipefail

# vars
PYTHON_VERSION=3.9.7

echo "set ZSH to default"
chsh -s $(which zsh)

echo "setup doom-emacs"
$HOME/.emacs.d/bin/doom sync

echo "setup python"
PYENV_ROOT="$HOME/.pyenv"
PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init --path)"
pyenv install $PYTHON_VERSION || true
pyenv global $PYTHON_VERSION

echo "setup node"
NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
nvm install --lts

echo "setup fonts"
fc-cache -f -v

echo "setup autojump"
AUTOJUMP=https://github.com/wting/autojump.git
AUTOJUMP_DIR=/tmp/autojump
if [ ! -d $AUTOJUMP_DIR ]; then
    git clone $AUTOJUMP $AUTOJUMP_DIR
fi
cd $AUTOJUMP_DIR
./install.py
