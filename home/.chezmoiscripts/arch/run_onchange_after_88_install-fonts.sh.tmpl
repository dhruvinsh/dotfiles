#!/bin/bash
# vim: set expandtab ts=4 sw=4 ft=sh:
# shellcheck disable=1083

# {{ template "scripts/download_helpers.sh" . }}

fonts=(
    adobe-source-code-pro-fonts 
    noto-fonts
    noto-fonts-emoji
    otf-font-awesome 
    ttf-cascadia-code-nerd
    ttf-droid 
    ttf-fantasque-nerd
    ttf-firacode-nerd
    ttf-iosevka-nerd
    ttf-jetbrains-mono-nerd
    ttf-nerd-fonts-symbols
    ttf-victor-mono-nerd

)
for font in "${fonts[@]}"; do
    install_package_pacman "$font"
done


TARGET="/usr/local/share/fonts"


if [ ! -d "$TARGET" ]; then
    sudo mkdir -p "$TARGET"
fi

TEMP_DST=/tmp/fonts

# just a cleanup if its present
rm -rf "$TEMP_DST"

MAPLE=https://github.com/subframe7536/maple-font/releases/download/{{ (gitHubLatestRelease "subframe7536/maple-font").TagName }}/MapleMono-NF.zip
for font in $MAPLE; do
    echo "--> setting $font"
    extract_zip "$font" "$TEMP_DST"
    sudo fd . "$TEMP_DST" --extension "ttf" -E "static" -x mv {} "$TARGET"
    rm -rf "$TEMP_DST"
done


echo "--> updating fonts cache"
sudo fc-cache -fv
